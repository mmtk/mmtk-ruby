language = "C"

include_guard = "MMTK_H"

autogen_warning = "/* Warning, this file is autogenerated by cbindgen from the mmtk-ruby repository. Don't modify this manually. */"

tab_width = 4

usize_is_size_t = true

includes = ["ruby/internal/value.h"]

after_includes = """
typedef struct MMTk_Builder MMTk_Builder;
typedef struct MMTk_Mutator MMTk_Mutator;

struct rb_thread_struct;
typedef struct rb_thread_struct rb_thread_t;
typedef rb_thread_t* MMTk_VMThread;
typedef rb_thread_t* MMTk_VMMutatorThread;
typedef struct MMTk_GCThreadTLS* MMTk_VMWorkerThread;
typedef void* MMTk_Address;
typedef void* MMTk_ObjectReference;
typedef void* MMTk_NullableObjectReference;
typedef uint32_t MMTk_AllocationSemantics;
"""

[export]
include = ["HiddenHeader"]
exclude = ["VALUE"]

[export.rename]
"MMTKBuilder" = "MMTk_Builder"
"RubyMutator" = "MMTk_Mutator"
"GCThreadTLS" = "MMTk_GCThreadTLS"
"RubyUpcalls" = "MMTk_RubyUpcalls"
"ObjectClosure" = "MMTk_ObjectClosure"
"VMThread" = "MMTk_VMThread"
"VMMutatorThread" = "MMTk_VMMutatorThread"
"VMWorkerThread" = "MMTk_VMWorkerThread"
"Address" = "MMTk_Address"
"ObjectReference" = "MMTk_ObjectReference"
"NullableObjectReference" = "MMTk_NullableObjectReference"
"RawVecOfObjRef" = "MMTk_RawVecOfObjRef"
"AllocationSemantics" = "MMTk_AllocationSemantics"
"GC_THREAD_KIND_CONTROLLER" = "MMTK_GC_THREAD_KIND_CONTROLLER"
"GC_THREAD_KIND_WORKER" = "MMTK_GC_THREAD_KIND_WORKER"
"OBJREF_OFFSET" = "MMTK_OBJREF_OFFSET"
"MIN_OBJ_ALIGN" = "MMTK_MIN_OBJ_ALIGN"
"HiddenHeader" = "MMTk_HiddenHeader"
"HIDDEN_SIZE_MASK" = "MMTK_HIDDEN_SIZE_MASK"
"ConcurrentSetStats" = "MMTk_ConcurrentSetStats"
